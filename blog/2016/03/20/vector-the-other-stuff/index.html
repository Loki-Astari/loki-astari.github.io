
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Vector - Part 5: The Other Stuff - Loki Astari</title>
  <meta name="author" content="Loki Astari">

  
  <meta name="description" content="C++ By Example. The Vector">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lokiastari.com/blog/2016/03/20/vector-the-other-stuff">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/LokiAstari" rel="alternate" title="Loki Astari" type="application/atom+xml">
  
  

</head>

<body   >
  <nav role="navigation"><div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">Loki Astari</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/">Blog</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/so-you-want-to-learn-c-plus-plus/">So you want to learn C++</a></li>
  <li><a href="/c-plus-plus-by-example/">C++ By Example</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="http://feeds.feedburner.com/LokiAstari" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:lokiastari.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      
<article class="hentry span9" role="article">

  
  <header class="page-header">
    
      <h1 class="entry-title">Vector - Part 5: The Other Stuff</h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-03-20T22:26:43-07:00" pubdate data-updated="true">Mar 20<span>th</span>, 2016</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>So the C++ standard specifies a set of requirements for containers. Very few requirements are specified in terms of containers so adhering to these exactly is not required (unless you want to be considered for the standard). But they provide an in-site into what can be done with them and if you support them will allow your container to be more easily used with some features of the language and standard library. I am not going to go over all of them here (that is left as an exercise for the reader), but I will go over the ones I would expect to see in a simple implementation (the kind you would see in a university project).</p>

<p>For details see the <a href="http://stackoverflow.com/a/4653479/14065">latest copy of the C++ standard</a>.</p>

<ul>
<li>23.2.1  General container requirements [container.requirements.general]</li>
<li>23.2.3  Sequence containers [sequence.reqmts]</li>
</ul>


<h4>Internal Types</h4>

<ul>
<li>value&#95;type</li>
<li>reference</li>
<li>const&#95;reference</li>
<li>iterator</li>
<li>const&#95;iterator</li>
<li>difference&#95;type</li>
<li>size&#95;type</li>
</ul>


<p>It is worth specifying the internal types defined here. As this allows you to abstract the implementation details of the container. This will allow you to change the implementation details without users having to change there implementation; as long as the changes still provide the same interface but the interface to reference/pointers/iterators are relatively trivial and well defined.</p>

<h4>Constructors</h4>

<p>In C++11 the <code>std::initializer_list&lt;T&gt;</code> was introduced. This allows a better list initialization syntax to be used with user defined types. Since this is usually defined in terms of the range based construction we should probably add both of these constructors.</p>

<ul>
<li>Vector(std::initializer&#95;list<T> const&amp; list)</li>
<li>Vector(I begin, I end)</li>
</ul>


<h4>Iterators</h4>

<ul>
<li>begin()</li>
<li>rbegin()</li>
<li>begin() const</li>
<li>rbegin() const</li>
<li>cbegin() const</li>
<li>crbegin() const</li>
<li>end()</li>
<li>rend()</li>
<li>end() const</li>
<li>cend() const</li>
<li>rend() const</li>
<li>crend() const</li>
</ul>


<p>The iterators are relatively easy to write. They also allow the container to be used with the new range based for that was added in C++14. So this becomes another easy add.</p>

<h4>Member Access</h4>

<ul>
<li>at(&lt;index&gt;)</li>
<li>at(&lt;index&gt;) const</li>
<li>operator&#91;&#93;(&lt;index&gt;)</li>
<li>operator&#91;&#93;(&lt;index&gt;) const</li>
<li>front()</li>
<li>back()</li>
<li>front() const</li>
<li>back() const</li>
</ul>


<p>Member access to a vector should be very efficient. As a result normally range checks are not performed on member access, i.e. the user is expected to make sure that the method pre-conditions have been met before calling the method. This results in very efficient access to the members of a <code>Vector</code>. This is not normally a problem because index ranges are normally checked as part of a loop range as long as these are validated against the size of the array it does not need to be validated again.</p>

<figure class='code'><figcaption><span>For Loop Vector Access</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>    <span class="n">Vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>   <span class="n">d</span> <span class="o">=</span> <span class="n">getData</span><span class="p">();</span>
</span><span class='line'>    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">loop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">loop</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">loop</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">d</span><span class="p">[</span><span class="n">loop</span><span class="p">];</span>   <span class="c1">// No need for antoher range</span>
</span><span class='line'>                                <span class="c1">// check here as we know that loop is inside the</span>
</span><span class='line'>                                <span class="c1">// bounds of the vector d.</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">There</span> <span class="n">is</span> <span class="n">also</span> <span class="n">the</span> <span class="err">`</span><span class="n">at</span><span class="p">()</span><span class="err">`</span> <span class="n">method</span> <span class="n">which</span> <span class="n">does</span> <span class="n">validate</span> <span class="n">the</span> <span class="n">index</span> <span class="n">provided</span> <span class="n">before</span> <span class="n">accessing</span> <span class="n">the</span> <span class="n">element</span> <span class="p">(</span><span class="n">throwing</span> <span class="n">an</span> <span class="n">exception</span> <span class="k">if</span> <span class="n">the</span> <span class="n">index</span> <span class="n">is</span> <span class="n">out</span> <span class="n">of</span> <span class="n">range</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp">#### Non-Mutating Member Functions</span>
</span><span class='line'><span class="o">*</span> <span class="n">size</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'><span class="o">*</span> <span class="kt">bool</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>
</span><span class='line'><span class="n">To</span> <span class="n">allow</span> <span class="n">us</span> <span class="n">to</span> <span class="n">check</span> <span class="n">the</span> <span class="n">pre</span><span class="o">-</span><span class="n">conditions</span> <span class="n">on</span> <span class="n">the</span> <span class="n">element</span> <span class="n">accesses</span> <span class="n">methods</span> <span class="n">we</span> <span class="n">need</span> <span class="n">a</span> <span class="n">couple</span> <span class="n">of</span> <span class="n">functions</span> <span class="n">that</span> <span class="n">check</span> <span class="n">the</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">object</span><span class="p">.</span> <span class="n">These</span> <span class="n">are</span> <span class="n">provided</span> <span class="n">here</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#### Mutating Member Functions</span>
</span><span class='line'><span class="o">*</span> <span class="n">push</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">95</span><span class="p">;</span><span class="n">back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">object</span><span class="o">-</span><span class="n">ref</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;)</span>
</span><span class='line'><span class="o">*</span> <span class="n">push</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">95</span><span class="p">;</span><span class="n">back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">object</span><span class="o">-</span><span class="n">rvalue</span><span class="o">-</span><span class="n">ref</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;)</span>
</span><span class='line'><span class="o">*</span> <span class="n">emplace</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">95</span><span class="p">;</span><span class="n">back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">args</span><span class="p">...</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;)</span>
</span><span class='line'><span class="o">*</span> <span class="n">pop</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">95</span><span class="p">;</span><span class="n">back</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">The</span> <span class="n">following</span> <span class="n">members</span> <span class="n">are</span> <span class="n">standard</span> <span class="n">easy</span> <span class="n">to</span> <span class="n">implement</span> <span class="n">methods</span> <span class="n">of</span> <span class="err">`</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="err">`</span> <span class="p">(</span><span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="n">that</span> <span class="n">I</span> <span class="n">would</span> <span class="n">expect</span> <span class="n">to</span> <span class="n">see</span> <span class="n">in</span> <span class="n">every</span> <span class="n">implementation</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="n">The</span> <span class="n">other</span> <span class="n">mutating</span> <span class="n">member</span> <span class="n">functions</span> <span class="n">are</span> <span class="n">less</span> <span class="n">trivial</span> <span class="n">as</span> <span class="n">they</span> <span class="n">require</span> <span class="n">elements</span> <span class="n">to</span> <span class="n">be</span> <span class="n">moved</span> <span class="n">around</span><span class="p">.</span> <span class="n">They</span> <span class="n">are</span> <span class="n">not</span> <span class="n">that</span> <span class="n">hard</span> <span class="n">but</span> <span class="n">you</span> <span class="n">must</span> <span class="n">put</span> <span class="n">some</span> <span class="n">though</span> <span class="n">into</span> <span class="n">the</span> <span class="n">most</span> <span class="n">effecient</span> <span class="n">techniques</span> <span class="n">to</span> <span class="n">move</span> <span class="n">elements</span> <span class="p">(</span><span class="n">ie</span> <span class="n">move</span> <span class="n">or</span> <span class="n">copy</span><span class="p">)</span> <span class="n">and</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">that</span> <span class="n">capacity</span> <span class="n">is</span> <span class="n">not</span> <span class="n">exceeded</span> <span class="n">by</span> <span class="n">multiple</span> <span class="n">inserts</span><span class="p">.</span> <span class="n">As</span> <span class="n">a</span> <span class="n">result</span> <span class="n">I</span> <span class="n">would</span> <span class="n">expect</span> <span class="n">to</span> <span class="n">see</span> <span class="n">these</span> <span class="n">methods</span> <span class="n">only</span> <span class="n">on</span> <span class="n">a</span> <span class="n">as</span> <span class="n">need</span> <span class="n">basis</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#### Comparitors</span>
</span><span class='line'><span class="o">*</span> <span class="k">operator</span><span class="o">==</span> <span class="k">const</span>
</span><span class='line'><span class="o">*</span> <span class="k">operator</span><span class="o">!=</span> <span class="k">const</span>
</span><span class='line'>
</span><span class='line'><span class="n">Easy</span> <span class="n">comparison</span> <span class="n">operators</span><span class="p">.</span>
</span><span class='line'><span class="n">Optionally</span> <span class="n">you</span> <span class="n">can</span> <span class="n">provide</span> <span class="n">the</span> <span class="n">other</span> <span class="n">comparison</span> <span class="n">operators</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp"># Final</span>
</span><span class='line'><span class="o">**</span><span class="n">No</span> <span class="n">idea</span> <span class="n">why</span> <span class="n">Jackel</span> <span class="n">isadding</span> <span class="n">all</span> <span class="n">the</span> <span class="n">blank</span> <span class="n">lines</span> <span class="n">to</span> <span class="n">my</span> <span class="n">source</span><span class="o">**</span>
</span></code></pre></td></tr></table></div></figure>


<p>cpp Vector</p>

<h1>include &lt;type_traits></h1>

<h1>include <memory></h1>

<h1>include <algorithm></h1>

<h1>include <stdexcept></h1>

<h1>include <iterator></h1>

<p>template<typename T>
class Vector
{</p>

<pre><code>public:
    using value_type        = T;
    using reference         = T&amp;;
    using const_reference   = T const&amp;;
    using pointer           = T*;
    using const_pointer     = T const*;
    using iterator          = T*;
    using const_iterator    = T const*;
    using difference_type   = std::ptrdiff_t;
    using size_type         = std::size_t;

private:
    size_type       capacity;
    size_type       length;
    T*              buffer;

    struct Deleter
    {
        void operator()(T* buffer) const
        {
            ::operator delete(buffer);
        }
    };

public:
    Vector(int capacity = 10)
        : capacity(capacity)
        , length(0)
        , buffer(static_cast&lt;T*&gt;(::operator new(sizeof(T) * capacity)))
    {}
    template&lt;typename I&gt;
    Vector(I begin, I end)
        : capacity(std::distance(begin, end))
        , length(0)
        , buffer(static_cast&lt;T*&gt;(::operator new(sizeof(T) * capacity)))
    {
        for(auto loop = begin;loop != end; ++loop)
        {
            pushBackInternal(*loop);
        }
    }
    Vector(std::initializer_list&lt;T&gt; const&amp; list)
        : Vector(std::begin(list), std::end(list))
    {}
    ~Vector()
    {
        // Make sure the buffer is deleted even with exceptions
        // This will be called to release the pointer at the end
        // of scope.
        std::unique_ptr&lt;T, Deleter&gt;     deleter(buffer, Deleter());

        clearElements&lt;T&gt;();
    }
    Vector(Vector const&amp; copy)
        : capacity(copy.length)
        , length(0)
        , buffer(static_cast&lt;T*&gt;(::operator new(sizeof(T) * capacity)))
    {
        try
        {
            for(int loop = 0; loop &lt; copy.length; ++loop)
            {
                push_back(copy.buffer[loop]);
            }
        }
        catch(...)
        {
            clearElements&lt;T&gt;();
            ::operator delete(buffer);

            // Make sure the exceptions continue propagating after
            // the cleanup has completed.
            throw;
        }
    }
    Vector&amp; operator=(Vector const&amp; copy)
    {
        copyAssign&lt;T&gt;(copy);
        return *this;
    }
    Vector(Vector&amp;&amp; move) noexcept
        : capacity(0)
        , length(0)
        , buffer(nullptr)
    {
        move.swap(*this);
    }
    Vector&amp; operator=(Vector&amp;&amp; move) noexcept
    {
        move.swap(*this);
        return *this;
    }
    void swap(Vector&amp; other) noexcept
    {
        using std::swap;
        swap(capacity,      other.capacity);
        swap(length,        other.length);
        swap(buffer,        other.buffer);
    }

    size_type           size() const                        {return length;}
    bool                empty() const                       {return length == 0;}

    reference           operator[](size_type index)         {return buffer[index];}
    const_reference     operator[](size_type index) const   {return buffer[index];}
    reference           at(size_type index)                 {validateIndex(index);return buffer[index];}
    const_reference     at(size_type index) const           {validateIndex(index);return buffer[index];}
    reference           front()                             {return buffer[0];}
    const_reference     front() const                       {return buffer[0];}
    reference           back()                              {return buffer[length - 1];}
    const_reference     back() const                        {return buffer[length - 1];}

    iterator            begin()                             {return buffer;}
    iterator            rbegin()                            {return std::reverse_iterator&lt;iterator&gt;(end());}
    const_iterator      begin() const                       {return buffer;}
    const_iterator      rbegin() const                      {return std::reverse_iterator&lt;iterator&gt;(end());}

    iterator            end()                               {return buffer + length;}
    iterator            rend()                              {return std::reverse_iterator&lt;iterator&gt;(begin());}
    const_iterator      end() const                         {return buffer + length;}
    const_iterator      rend() const                        {return std::reverse_iterator&lt;iterator&gt;(begin());}

    const_iterator      cbegin() const                      {return begin();}
    const_iterator      crbegin() const                     {return rbegin();}
    const_iterator      cend() const                        {return end();}
    const_iterator      crend() const                       {return rend();}

    bool operator!=(Vector const&amp; rhs) const {return !(*this == rhs);}
    bool operator==(Vector const&amp; rhs) const
    {
        return (size() == rhs.size())
            ?  std::equal(begin(), end(), rhs.begin())
            :  false;
    }

    void push_back(T const&amp; value)
    {
        resizeIfRequire();
        pushBackInternal(value);
    }
    void push_back(T&amp;&amp; value)
    {
        resizeIfRequire();
        moveBackInternal(std::forward&lt;T&gt;(value));
    }
    template&lt;typename... Args&gt;
    void emplace_back(Args&amp;&amp;... args)
    {
        resizeIfRequire();
        constructBackInternal(std::forward&lt;T&gt;(args)...);
    }
    void pop_back()
    {
        --length;
        buffer[length].~T();
    }
    void reserve(size_type capacityUpperBound)
    {
        if (capacityUpperBound &gt; capacity)
        {
            reserveCapacity(capacityUpperBound);
        }
    }
private:
    void validateIndex(size_type index) const
    {
        if (index &gt;= length)
        {
            throw std::out_of_range("Out of Range");
        }
    }

    void resizeIfRequire()
    {
        if (length == capacity)
        {
            size_type     newCapacity  = capacity * 1.62;
            reserveCapacity(newCapacity);
        }
    }
    void reserveCapacity(size_type newCapacity)
    {
        Vector&lt;T&gt;  tmpBuffer(newCapacity);

        simpleCopy&lt;T&gt;(tmpBuffer);

        tmpBuffer.swap(*this);
    }
    void pushBackInternal(T const&amp; value)
    {
        new (buffer + length) T(value);
        ++length;
    }
    void moveBackInternal(T&amp;&amp; value)
    {
        new (buffer + length) T(std::forward&lt;T&gt;(value));
        ++length;
    }
    template&lt;typename... Args&gt;
    void constructBackInternal(Args&amp;&amp;... args)
    {
        new (buffer + length) T(std::forward&lt;Args&gt;(args)...);
        ++length;
    }

    template&lt;typename X&gt;
    typename std::enable_if&lt;std::is_nothrow_move_constructible&lt;X&gt;::value == false&gt;::type
    simpleCopy(Vector&lt;T&gt;&amp; dst)
    {
        std::for_each(buffer, buffer + length,
                      [&amp;dst](T const&amp; v){dst.pushBackInternal(v);}
                     );
    }

    template&lt;typename X&gt;
    typename std::enable_if&lt;std::is_nothrow_move_constructible&lt;X&gt;::value == true&gt;::type
    simpleCopy(Vector&lt;T&gt;&amp; dst)
    {
        std::for_each(buffer, buffer + length,
                      [&amp;dst](T&amp; v){dst.moveBackInternal(std::move(v));}
                     );
    }

    template&lt;typename X&gt;
    typename std::enable_if&lt;std::is_trivially_destructible&lt;X&gt;::value == false&gt;::type
    clearElements()
    {
        // Call the destructor on all the members in reverse order
        for(int loop = 0; loop &lt; length; ++loop)
        {
            // Note we destroy the elements in reverse order.
            buffer[length - 1 - loop].~T();
        }
    }

    template&lt;typename X&gt;
    typename std::enable_if&lt;std::is_trivially_destructible&lt;X&gt;::value == true&gt;::type
    clearElements()
    {
        // Trivially destructible objects can be re-used without using the destructor.
    }

    template&lt;typename X&gt;
    typename std::enable_if&lt;(std::is_nothrow_copy_constructible&lt;X&gt;::value
                        &amp;&amp;  std::is_nothrow_destructible&lt;X&gt;::value) == true&gt;::type
    copyAssign(Vector&lt;X&gt;&amp; copy)
    {
        if (this == &amp;copy)
        {
            return;
        }

        if (capacity &lt;= copy.length)
        {
            clearElements&lt;T&gt;();
            length = 0;
            for(int loop = 0; loop &lt; copy.length; ++loop)
            {
                pushBackInternal(copy[loop]);
            }
        }
        else
        {
            // Copy and Swap idiom
            Vector&lt;T&gt;  tmp(copy);
            tmp.swap(*this);
        }
    }

    template&lt;typename X&gt;
    typename std::enable_if&lt;(std::is_nothrow_copy_constructible&lt;X&gt;::value
                         &amp;&amp;  std::is_nothrow_destructible&lt;X&gt;::value) == false&gt;::type
    copyAssign(Vector&lt;X&gt;&amp; copy)
    {
        // Copy and Swap idiom
        Vector&lt;T&gt;  tmp(copy);
        tmp.swap(*this);
    }
</code></pre>

<p>};
&#8220;`</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Loki Astari, (C)2016,</span></span>

      








  


<time datetime="2016-03-20T22:26:43-07:00" pubdate data-updated="true">Mar 20<span>th</span>, 2016</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/c-plus-plus/'>C++</a>, <a class='category' href='/blog/categories/c-plus-plus-by-example/'>C++-By-Example</a>, <a class='category' href='/blog/categories/coding/'>Coding</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://lokiastari.com/blog/2016/03/20/vector-the-other-stuff/" data-via="LokiAstari" data-counturl="http://lokiastari.com/blog/2016/03/20/vector-the-other-stuff/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    
    <section>
      <h1>Comments</h1>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
    
    <ul class="pager">
      
      <li class="previous"><a class="basic-alignment left"
        href="/blog/2016/03/19/vector-simple-optimizations/" title="Previous Post:
        Vector - Part 4: Simple Optimizations">&laquo; Vector - Part 4: Simple Optimizations</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
    </ul>
  </footer>
</article>

<aside class="sidebar-nav span3">
  
    <section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2016/03/20/vector-the-other-stuff/">Vector - Part 5: The Other Stuff</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/19/vector-simple-optimizations/">Vector - Part 4: Simple Optimizations</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/12/vector-resize/">Vector - Part 3: Vector Resize</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/29/vector-resource-management-ii-copy-assignment/">Vector - Part 2: Resource Management Copy Swap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/27/vector/">Vector - Part 1: Resource Management Allocation</a>
      </li>
    
  </ul>
</section>
<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Twitter</li>
    <li class="post">
        <a class="twitter-timeline"  href="https://twitter.com/LokiAstari"  data-widget-id="406713536040030209">Tweets by @LokiAstari</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </li>
  </ul>
</section>

<section class="well">
  <ul id="gh_repos" class="nav">
    <li class="nav-header">GitHub Repos</li>
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/Loki-Astari">@Loki-Astari</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        github.showRepos({
            user: 'Loki-Astari',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/asides/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2016 - Loki Astari -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45976821-1', 'lokiastari.com');
  ga('send', 'pageview');

</script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lokiastari';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://lokiastari.com/blog/2016/03/20/vector-the-other-stuff/';
        var disqus_url = 'http://lokiastari.com/blog/2016/03/20/vector-the-other-stuff/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
